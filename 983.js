"use strict";(self.webpackChunkbookhelper_js_emotion_front=self.webpackChunkbookhelper_js_emotion_front||[]).push([[983],{8566:(e,t,n)=>{n.d(t,{z:()=>l});var a=n(2804),r=n(5993),o=n(7294),i=n(3639);function l(e){const[t,n]=(0,o.useState)(!1);return r.O.onAuthStateChanged((e=>{n(!!e)})),(0,a.cn)({key:`firebase/${e}/${(0,i.Z)()}`,default:t})}},5510:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294);const r=(0,n(8884).Z)("div",{target:"exnvd0w0"})("position:fixed;top:0;left:0;margin:0;padding:0;background-color:#e5e9ea;color:#00000096;display:flex;justify-content:center;align-items:center;width:100%;height:100%;z-index:100;transition-duration:1.5s;",(e=>"doing"===e.mode?{opacity:"1"}:"done"===e.mode?{opacity:"0",visibility:"hidden"}:null)," .container{position:relative;& span{font-weight:800;font-size:40px;}.loadContainer{position:relative;left:96px;top:10;height:80px;& div{display:inline-block;position:absolute;top:10px;left:8px;width:16px;background:currentColor;animation:lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;}& div:nth-of-type(1){left:8px;animation-delay:0s;}& div:nth-of-type(2){left:32px;animation-delay:0.12s;}& div:nth-of-type(3){left:56px;animation-delay:0.24s;}@keyframes lds-facebook{0%{top:8px;height:64px;}50%,100%{top:24px;height:32px;}}}}"),o=function({loading:e}){return a.createElement(r,{mode:e?"doing":"done"},a.createElement("div",{className:"container"},a.createElement("span",null,"Book Comment"),a.createElement("div",{className:"loadContainer"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))))}},4066:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);const r=e=>{const[t,n]=(0,a.useState)(e),r=(0,a.useCallback)((e=>{n(e.target.value)}),[]);return[t,n,r]}},3983:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var a=n(4066),r=n(9669),o=n.n(r),i=n(7294),l=n(6974),s=n(8884),c=n(7462),m=n(3366);const d=i.useLayoutEffect;var u=function(e,t){"function"!=typeof e?e.current=t:e(t)};var f={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},g=function(e){Object.keys(f).forEach((function(t){e.style.setProperty(t,f[t],"important")}))},p=null,h=function(){},b=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],v=!!document.documentElement.currentStyle,x=function(e,t){var n,a=e.cacheMeasurements,r=e.maxRows,o=e.minRows,l=e.onChange,s=void 0===l?h:l,f=e.onHeightChange,x=void 0===f?h:f,y=(0,m.Z)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),E=void 0!==y.value,k=(0,i.useRef)(null),w=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)((function(a){e.current=a,n.current&&u(n.current,null),n.current=t,t&&u(t,a)}),[t])}(k,t),C=(0,i.useRef)(0),D=(0,i.useRef)(),S=function(){var e=k.current,t=a&&D.current?D.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,a=(n=t,b.reduce((function(e,t){return e[t]=n[t],e}),{})),r=a.boxSizing;return""===r?null:(v&&"border-box"===r&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px"),{sizingStyle:a,paddingSize:parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),borderSize:parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth)})}(e);if(t){D.current=t;var n=function(e,t,n,a){void 0===n&&(n=1),void 0===a&&(a=1/0),p||((p=document.createElement("textarea")).setAttribute("tabindex","-1"),p.setAttribute("aria-hidden","true"),g(p)),null===p.parentNode&&document.body.appendChild(p);var r=e.paddingSize,o=e.borderSize,i=e.sizingStyle,l=i.boxSizing;Object.keys(i).forEach((function(e){var t=e;p.style[t]=i[t]})),g(p),p.value=t;var s=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(p,e);p.value="x";var c=p.scrollHeight-r,m=c*n;"border-box"===l&&(m=m+r+o),s=Math.max(m,s);var d=c*a;return"border-box"===l&&(d=d+r+o),[s=Math.min(d,s),c]}(t,e.value||e.placeholder||"x",o,r),i=n[0],l=n[1];C.current!==i&&(C.current=i,e.style.setProperty("height",i+"px","important"),x(i,{rowHeight:l}))}};return(0,i.useLayoutEffect)(S),n=function(e){var t=(0,i.useRef)(e);return d((function(){t.current=e})),t}(S),(0,i.useLayoutEffect)((function(){var e=function(e){n.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,i.createElement)("textarea",(0,c.Z)({},y,{onChange:function(e){E||S(),s(e)},ref:w}))};const y=(0,i.forwardRef)(x);var E=n(6898),k=n(4199),w=n(444);function C(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function D(e,t,n){var a=[],r=(0,w.f)(e,a,n);return a.length<2?n:r+t(a)}var S=function e(t){for(var n="",a=0;a<t.length;a++){var r=t[a];if(null!=r){var o=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))o=e(r);else for(var i in o="",r)r[i]&&i&&(o&&(o+=" "),o+=i);break;default:o=r}o&&(n&&(n+=" "),n+=o)}}return n};var z=function(e){var t=(0,E.Z)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered,void 0);return(0,w.M)(t,r,!1),t.key+"-"+r.name};return{css:n,cx:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return D(t.registered,n,S(a))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered);C(t,r)},keyframes:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered),o="animation-"+r.name;return C(t,{name:r.name,styles:"@keyframes "+o+"{"+r.styles+"}"}),o},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:w.f.bind(null,t.registered),merge:D.bind(null,t.registered,n)}}({key:"css"}),N=(z.flush,z.hydrate,z.cx,z.merge,z.getRegisteredStyles,z.injectGlobal,z.keyframes,z.css);z.sheet,z.cache;const Z=(0,s.Z)("div",{target:"e1j2wcfi5"})({name:"1o3373h",styles:"position:relative;width:100%;height:100vh;display:flex;justify-content:center;align-items:center"}),R=(0,s.Z)("div",{target:"e1j2wcfi4"})({name:"1umaxau",styles:"position:relative;width:800px;display:flex;flex-direction:row;font-family:'Noto Sans KR',sans-serif;.topBtn{position:absolute;top:-5;right:0;z-index:5;& img{width:15px;}& img:hover{cursor:pointer;}}"}),j=(0,s.Z)("div",{target:"e1j2wcfi3"})({name:"1u5ryat",styles:"position:relative;height:280px;float:left;box-shadow:0px 1px 1px rgba(0, 0, 0, 0.3),0px 2px 2px rgba(0, 0, 0, 0.22);& a{position:absolute;left:0;bottom:-20;text-decoration:none;font-size:12px;color:rgb(105, 105, 105);width:60px;}& a:hover{color:black;}"}),F=(0,s.Z)("div",{target:"e1j2wcfi2"})({name:"1r649v9",styles:"width:100%;margin-left:70px;& hr{margin:20px 0;border:2px solid rgb(230, 230, 230);}.longComment{color:rgb(105, 105, 105);}"}),O=(0,s.Z)("div",{target:"e1j2wcfi1"})({name:"rro8en",styles:"color:rgb(105, 105, 105);text-align:justify"}),L=(0,s.Z)("div",{target:"e1j2wcfi0"})({name:"2gbdx1",styles:"position:absolute;right:0;bottom:-10;color:rgb(105, 105, 105);font-family:'Open Sans',sans-serif;font-size:14px;& span{margin-left:20px;}& span:hover{cursor:pointer;}"});var V=n(5993),T=n(8703),U=n(2804),A=n(8566),M=n(5510),B=n(9598),W=n(3201);const I=(0,s.Z)("div",{target:"e1m88ib62"})({name:"1xn4xk6",styles:".title{margin:0;margin-bottom:20px;font-size:22px;color:black;}.infoDiv{color:rgb(105, 105, 105);margin:7px 0;.rtcomment{font-size:12px;margin-left:10px;}}.tagName{margin-right:65px;}& hr{margin:20px 0;border:2px solid rgb(230, 230, 230);}.longComment{color:rgb(105, 105, 105);}"}),H=(0,s.Z)("textarea",{target:"e1m88ib61"})({name:"lxk7ur",styles:"resize:none;vertical-align:middle;width:50px;height:25px;padding-left:10px;&:focus{outline:none;}"}),P=(0,s.Z)("textarea",{target:"e1m88ib60"})({name:"gsp2hd",styles:"resize:none;vertical-align:middle;width:420px;height:55px;padding:10px;&:focus{outline:none;}"}),_=function({book:e,infoMode:t,editMode:n,rating:a,onChangeRating:r,onChangeShortComment:o,shortComment:l}){return i.createElement(I,null,i.createElement("p",{className:"title"},e.title," "),e.author?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"작가 "),i.createElement("span",null,e.author)):null,e.categoryId?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"장르 "),i.createElement("span",null,(0,W.Z)(e.categoryId))):null,e.pubDate?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"출판일"),i.createElement("span",null,(0,B.Z)(e.pubDate))):null,t?null:i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"평점 "),n?i.createElement(i.Fragment,null,i.createElement(H,{onChange:r,value:a}),i.createElement("span",{className:"rtcomment"},"5점이 만점입니다.")):i.createElement("span",null,a)),t?null:i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"한줄평"),n?i.createElement(P,{onChange:o,value:"There's no comment"===l?"":l,maxLength:34}):i.createElement("span",null,l)))},J=function(){const{isbn:e}=(0,l.UO)(),[t,n]=(0,i.useState)({}),[r,s]=(0,i.useState)(0),[c,m]=(0,i.useState)(!1),[d,u,f]=(0,a.Z)(0),[g,p,h]=(0,a.Z)("There's no comment"),[b,v,x]=(0,a.Z)("You have no commnet for this book"),[E,k]=(0,i.useState)(!1),[w,C]=(0,i.useState)(!1),D=(0,U.sJ)((0,A.z)("detailpage")),S=(0,l.s0)(),z=(0,i.useCallback)((()=>{C((e=>!e))}),[]),B=(0,i.useCallback)((()=>{k((e=>!e))}),[]),W=(0,i.useCallback)((()=>{k(!1)}),[]),I=(0,i.useCallback)((()=>{S(-1)}),[S]),H=(0,i.useCallback)((async()=>{if(window.confirm("정말로 이 후기를 지우시겠습니까?")){const e=(0,T.JU)(V.w,"UserEval",V.O.currentUser.uid);await(0,T.r7)(e,{[r]:(0,T.AK)()}).then((()=>window.alert("삭제 완료"))).catch((e=>console.log(e)))}}),[r]),P=(0,i.useCallback)((async e=>{e.preventDefault();try{await(0,T.pl)((0,T.JU)(V.w,"UserEval",V.O.currentUser.uid),{[r]:Object.assign({},t,{rating:d,shortComment:g,longComment:b,editDate:Date()})},{merge:!0})}catch(e){console.log(e)}k(!1),C(!1)}),[t,r,b,d,g]),J=(0,i.useCallback)((async()=>{if(D){const e=await(await(0,T.QT)((0,T.JU)(V.w,"UserEval",V.O.currentUser.uid))).data();e[r]&&e?e&&(C(!1),u(e[r].rating),p(e[r].shortComment),v(e[r].longComment)):C(!0)}else C(!0),u(0),p("There's no comment"),v("You have no commnet for this book");m(!1)}),[r,D,v,u,p]);return(0,i.useEffect)((()=>{m(!0),o().get(`https://www.interbookserver.kro.kr:3085/isbnsearch/${e}`).then((e=>{n(e.data.items[0]),s(e.data.items[0].isbn)}))}),[e,n,m]),(0,i.useEffect)((()=>{Object.keys(t).length&&J()}),[t,J,D]),i.createElement(i.Fragment,null,i.createElement(M.Z,{loading:c}),i.createElement(Z,null,i.createElement(R,null,i.createElement("p",{className:"topBtn",onClick:I},i.createElement("img",{src:"https://user-images.githubusercontent.com/79993356/154732530-9f85dfa4-e9f8-484a-acdf-6371eb981bc5.png",alt:"null"})),i.createElement(j,null,i.createElement("img",{src:t.coverLargeUrl,alt:t.title}),i.createElement("a",{href:t.link,target:"_blank"},"More Info?")),i.createElement(F,null,i.createElement(_,{book:t,infoMode:w,editMode:E,rating:d,onChangeRating:f,onChangeShortComment:h,shortComment:g}),i.createElement("hr",null),E?i.createElement("div",{style:{minHeight:"180px"}},((e,t)=>i.createElement(y,{className:N({name:"kk8v5",styles:"width:100%;padding:10px;&:focus{outline:none;}"}),minRows:10,placeholder:"",value:"You have no commnet for this book"===e?"":e,onChange:t}))(b,x),i.createElement(L,null,i.createElement("span",{onClick:P},"Finish"),i.createElement("span",{onClick:W},"Cancle"))):w?i.createElement(i.Fragment,null,i.createElement(O,null,i.createElement("p",null,t.description)),i.createElement(L,null,i.createElement("span",{onClick:z},"Comment"))):i.createElement(i.Fragment,null,i.createElement("p",{className:"longComment"},b),i.createElement(L,null,i.createElement("span",{onClick:z},"Info"),i.createElement("span",{onClick:B},"Comment"),i.createElement("span",{onClick:H},"Delete")))))))}},9598:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)}},3201:(e,t,n)=>{n.d(t,{Z:()=>r});const a={100:"국내도서",101:"국내도서>소설",102:"국내도서>시/에세이",103:"국내도서>예술/대중문화",104:"국내도서>사회과학",105:"국내도서>역사와 문화",107:"국내도서>잡지",108:"국내도서>만화",109:"국내도서>유아",110:"국내도서>아동",111:"국내도서>가정과 생활",112:"국내도서>청소년",113:"국내도서>초등학습서",114:"국내도서>고등학습서",115:"국내도서>국어/외국어/사전",116:"국내도서>자연과 과학",117:"국내도서>경제경영",118:"국내도서>자기계발",119:"국내도서>인문",120:"국내도서>종교/역학",122:"국내도서>컴퓨터/인터넷",123:"국내도서>자격서/수험서",124:"국내도서>취미/레저",125:"국내도서>전공도서/대학교재",126:"국내도서>건강/뷰티",128:"국내도서>여행",129:"국내도서>중등학습서",200:"외국도서",201:"외국도서>어린이",203:"외국도서>ELT/사전",205:"외국도서>문학",206:"외국도서>경영/인문",207:"외국도서>예술/디자인",208:"외국도서>실용",209:"외국도서>해외잡지",210:"외국도서>대학교재/전문서적",211:"외국도서>컴퓨터",214:"외국도서>일본도서",215:"외국도서>프랑스도서",216:"외국도서>중국도서",217:"외국도서>해외주문원서",300:"음반>",301:"음반>가요",302:"음반>Pop",303:"음반>Rock",304:"음반>일본음악",305:"음반>World Music",306:"음반>Jazz",307:"음반>클래식",308:"음반>국악",309:"음반>뉴에이지/명상",310:"음반>O.S.T",311:"음반>종교음악",312:"음반>유아/아동/태교",313:"음반>수입음반",314:"음반>액세서리/관련상품",315:"음반>뮤직 DVD",319:"음반>해외구매",320:"음반>LP",400:"DVD>",409:"DVD>애니메이션",411:"DVD>다큐멘터리",412:"DVD>TV시리즈",417:"DVD>건강/취미/스포츠",425:"DVD>영화",426:"DVD>해외구매",427:"DVD>기타",428:"DVD>블루레이",429:"DVD>유아동/교육DVD",430:"DVD>EBS 교육용"},r=function(e){let t=a[e]?.match(/(.+)>(.+)/);return t?.length>2?t[2]:""}},5993:(e,t,n)=>{n.d(t,{O:()=>l,w:()=>s});var a=n(301),r=n(1560),o=n(8703);const i=(0,a.ZF)({apiKey:"AIzaSyDl3PNP0Paj7ngS7cDdl72bOc9F7mznc4k",authDomain:"bookcomment-857df.firebaseapp.com",databaseURL:"bookcomment-857df-default-rtdb",projectId:"bookcomment-857df",storageBucket:"bookcomment-857df.appspot.com",messagingSenderId:"975887228518",appId:"1:975887228518:web:ad15d471090fc6eefcd7a7"}),l=(0,r.v0)(i),s=(0,o.ad)()}}]);