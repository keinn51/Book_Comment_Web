"use strict";(self.webpackChunkbookhelper_js_emotion_front=self.webpackChunkbookhelper_js_emotion_front||[]).push([[62],{8566:(e,t,n)=>{n.d(t,{z:()=>o});var a=n(2804),r=n(5993),i=n(7294);function o(){const[e,t]=(0,i.useState)(!1);return r.O.onAuthStateChanged((e=>{t(!!e)})),(0,a.cn)({key:"firebase/login",default:e})}},5510:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294);const r=(0,n(8884).Z)("div",{target:"exnvd0w0"})("position:absolute;top:0;left:0;margin:0;padding:0;background-color:#e5e9ea;color:#00000096;display:flex;justify-content:center;align-items:center;width:100%;height:100%;z-index:100;transition-duration:1.5s;",(e=>"doing"===e.mode?{opacity:"1"}:"done"===e.mode?{opacity:"0",visibility:"hidden"}:null)," .container{position:relative;& span{font-weight:800;font-size:40px;}.loadContainer{position:relative;left:96px;top:10;height:80px;& div{display:inline-block;position:absolute;top:10px;left:8px;width:16px;background:currentColor;animation:lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;}& div:nth-child(1){left:8px;animation-delay:0s;}& div:nth-child(2){left:32px;animation-delay:0.12s;}& div:nth-child(3){left:56px;animation-delay:0.24s;}@keyframes lds-facebook{0%{top:8px;height:64px;}50%,100%{top:24px;height:32px;}}}}"),i=function({loading:e}){return a.createElement(r,{mode:e?"doing":"done"},a.createElement("div",{className:"container"},a.createElement("span",null,"Book Comment"),a.createElement("div",{className:"loadContainer"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))))}},4066:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);const r=e=>{const[t,n]=(0,a.useState)(e),r=(0,a.useCallback)((e=>{n(e.target.value)}),[]);return[t,n,r]}},6062:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(4066),r=n(3201),i=n(9669),o=n.n(i),l=n(7294),s=n(6974),c=n(8884),d=n(7462),u=n(3366);const m=l.useLayoutEffect;var f=function(e,t){"function"!=typeof e?e.current=t:e(t)};var p={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},g=function(e){Object.keys(p).forEach((function(t){e.style.setProperty(t,p[t],"important")}))},h=null,v=function(){},b=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],x=!!document.documentElement.currentStyle,y=function(e,t){var n,a=e.cacheMeasurements,r=e.maxRows,i=e.minRows,o=e.onChange,s=void 0===o?v:o,c=e.onHeightChange,p=void 0===c?v:c,y=(0,u.Z)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),E=void 0!==y.value,w=(0,l.useRef)(null),k=function(e,t){var n=(0,l.useRef)();return(0,l.useCallback)((function(a){e.current=a,n.current&&f(n.current,null),n.current=t,t&&f(t,a)}),[t])}(w,t),C=(0,l.useRef)(0),D=(0,l.useRef)(),S=function(){var e=w.current,t=a&&D.current?D.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,a=(n=t,b.reduce((function(e,t){return e[t]=n[t],e}),{})),r=a.boxSizing;return""===r?null:(x&&"border-box"===r&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px"),{sizingStyle:a,paddingSize:parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),borderSize:parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth)})}(e);if(t){D.current=t;var n=function(e,t,n,a){void 0===n&&(n=1),void 0===a&&(a=1/0),h||((h=document.createElement("textarea")).setAttribute("tabindex","-1"),h.setAttribute("aria-hidden","true"),g(h)),null===h.parentNode&&document.body.appendChild(h);var r=e.paddingSize,i=e.borderSize,o=e.sizingStyle,l=o.boxSizing;Object.keys(o).forEach((function(e){var t=e;h.style[t]=o[t]})),g(h),h.value=t;var s=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(h,e);h.value="x";var c=h.scrollHeight-r,d=c*n;"border-box"===l&&(d=d+r+i),s=Math.max(d,s);var u=c*a;return"border-box"===l&&(u=u+r+i),[s=Math.min(u,s),c]}(t,e.value||e.placeholder||"x",i,r),o=n[0],l=n[1];C.current!==o&&(C.current=o,e.style.setProperty("height",o+"px","important"),p(o,{rowHeight:l}))}};return(0,l.useLayoutEffect)(S),n=function(e){var t=(0,l.useRef)(e);return m((function(){t.current=e})),t}(S),(0,l.useLayoutEffect)((function(){var e=function(e){n.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,l.createElement)("textarea",(0,d.Z)({},y,{onChange:function(e){E||S(),s(e)},ref:k}))};const E=(0,l.forwardRef)(y);var w=n(6898),k=n(4199),C=n(444);function D(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function S(e,t,n){var a=[],r=(0,C.f)(e,a,n);return a.length<2?n:r+t(a)}var z=function e(t){for(var n="",a=0;a<t.length;a++){var r=t[a];if(null!=r){var i=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))i=e(r);else for(var o in i="",r)r[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=r}i&&(n&&(n+=" "),n+=i)}}return n};var N=function(e){var t=(0,w.Z)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered,void 0);return(0,C.M)(t,r,!1),t.key+"-"+r.name};return{css:n,cx:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return S(t.registered,n,z(a))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered);D(t,r)},keyframes:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,k.O)(n,t.registered),i="animation-"+r.name;return D(t,{name:r.name,styles:"@keyframes "+i+"{"+r.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:C.f.bind(null,t.registered),merge:S.bind(null,t.registered,n)}}({key:"css"}),j=(N.flush,N.hydrate,N.cx,N.merge,N.getRegisteredStyles,N.injectGlobal,N.keyframes,N.css);N.sheet,N.cache;const Z=(0,c.Z)("div",{target:"e1j2wcfi7"})({name:"1o3373h",styles:"position:relative;width:100%;height:100vh;display:flex;justify-content:center;align-items:center"}),R=(0,c.Z)("div",{target:"e1j2wcfi6"})({name:"1umaxau",styles:"position:relative;width:800px;display:flex;flex-direction:row;font-family:'Noto Sans KR',sans-serif;.topBtn{position:absolute;top:-5;right:0;z-index:5;& img{width:15px;}& img:hover{cursor:pointer;}}"}),F=(0,c.Z)("div",{target:"e1j2wcfi5"})({name:"1u5ryat",styles:"position:relative;height:280px;float:left;box-shadow:0px 1px 1px rgba(0, 0, 0, 0.3),0px 2px 2px rgba(0, 0, 0, 0.22);& a{position:absolute;left:0;bottom:-20;text-decoration:none;font-size:12px;color:rgb(105, 105, 105);width:60px;}& a:hover{color:black;}"}),O=(0,c.Z)("div",{target:"e1j2wcfi4"})({name:"1ji2esg",styles:"width:100%;margin-left:70px;.title{margin:0;margin-bottom:20px;& p{margin:0;font-size:22px;color:black;}}.infoDiv{color:rgb(105, 105, 105);margin:7px 0;.rtcomment{font-size:12px;margin-left:10px;}}.tagName{margin-right:65px;}& hr{margin:20px 0;border:2px solid rgb(230, 230, 230);}.longComment{color:rgb(105, 105, 105);}"}),V=(0,c.Z)("textarea",{target:"e1j2wcfi3"})({name:"lxk7ur",styles:"resize:none;vertical-align:middle;width:50px;height:25px;padding-left:10px;&:focus{outline:none;}"}),L=(0,c.Z)("textarea",{target:"e1j2wcfi2"})({name:"gsp2hd",styles:"resize:none;vertical-align:middle;width:420px;height:55px;padding:10px;&:focus{outline:none;}"}),U=(0,c.Z)("div",{target:"e1j2wcfi1"})({name:"rro8en",styles:"color:rgb(105, 105, 105);text-align:justify"}),A=(0,c.Z)("div",{target:"e1j2wcfi0"})({name:"2gbdx1",styles:"position:absolute;right:0;bottom:-10;color:rgb(105, 105, 105);font-family:'Open Sans',sans-serif;font-size:14px;& span{margin-left:20px;}& span:hover{cursor:pointer;}"});var T=n(5993),B=n(8703),W=n(2804),I=n(8566),H=n(9598),M=n(5510);const P=function(){const{isbn:e}=(0,s.UO)(),[t,n]=(0,l.useState)({}),[i,c]=(0,l.useState)(0),[d,u]=(0,l.useState)(!1),[m,f,p]=(0,a.Z)(0),[g,h,v]=(0,a.Z)("There's no comment"),[b,x,y]=(0,a.Z)("You have no commnet for this book"),[w,k]=(0,l.useState)(!1),[C,D]=(0,l.useState)(!1),[S,z]=(0,W.FV)((0,I.z)()),N=(0,s.s0)(),P=(0,l.useCallback)((()=>{D((e=>!e))}),[]),_=(0,l.useCallback)((()=>{k((e=>!e))}),[]),J=(0,l.useCallback)((()=>{k(!1)}),[]),K=(0,l.useCallback)((()=>{N(-1)}),[N]),G=(0,l.useCallback)((async()=>{if(window.confirm("정말로 이 후기를 지우시겠습니까?")){const e=(0,B.JU)(T.w,"UserEval",T.O.currentUser.uid);await(0,B.r7)(e,{[i]:(0,B.AK)()}).then((()=>window.alert("삭제 완료"))).catch((e=>console.log(e)))}}),[i]),Y=(0,l.useCallback)((async e=>{e.preventDefault();try{await(0,B.pl)((0,B.JU)(T.w,"UserEval",T.O.currentUser.uid),{[i]:Object.assign({},t,{rating:m,shortComment:g,longComment:b,editDate:Date()})},{merge:!0})}catch(e){console.log(e)}k(!1),D(!1)}),[t,i,b,m,g]),Q=(0,l.useCallback)((async()=>{const e=await(await(0,B.QT)((0,B.JU)(T.w,"UserEval",T.O.currentUser.uid))).data();e[i]&&e?e&&(D(!1),f(e[i].rating),h(e[i].shortComment),x(e[i].longComment)):D(!0),u(!1)}),[i,x,f,h]);return(0,l.useEffect)((()=>{u(!0),o().get(`http://34.82.29.143:3085/isbnsearch/${e}`).then((e=>{n(e.data.items[0]),c(e.data.items[0].isbn)}))}),[e,n,u]),(0,l.useEffect)((()=>{S&&Object.keys(t).length&&Q()}),[t,Q,S]),l.createElement(l.Fragment,null,l.createElement(M.Z,{loading:d}),l.createElement(Z,null,l.createElement(R,null,l.createElement("p",{className:"topBtn",onClick:K},l.createElement("img",{src:"https://user-images.githubusercontent.com/79993356/154732530-9f85dfa4-e9f8-484a-acdf-6371eb981bc5.png",alt:"null"})),l.createElement(F,null,l.createElement("img",{src:t.coverLargeUrl,alt:t.title}),l.createElement("a",{href:t.link,target:"_blank"},"More Info?")),l.createElement(O,null,l.createElement("p",{className:"title"},l.createElement("p",null,t.title)),t.author?l.createElement("div",{className:"infoDiv"},l.createElement("span",{className:"tagName"},"작가 "),l.createElement("span",null,t.author)):null,t.categoryId?l.createElement("div",{className:"infoDiv"},l.createElement("span",{className:"tagName"},"장르 "),l.createElement("span",null,(0,r.Z)(t.categoryId))):null,t.pubDate?l.createElement("div",{className:"infoDiv"},l.createElement("span",{className:"tagName"},"출판일"),l.createElement("span",null,(0,H.Z)(t.pubDate))):null,C?null:l.createElement("div",{className:"infoDiv"},l.createElement("span",{className:"tagName"},"평점 "),w?l.createElement(l.Fragment,null,l.createElement(V,{onChange:p,value:m}),l.createElement("span",{className:"rtcomment"},"5점이 만점입니다.")):l.createElement("span",null,m)),C?null:l.createElement("div",{className:"infoDiv"},l.createElement("span",{className:"tagName"},"한줄평"),w?l.createElement(L,{onChange:v,value:"There's no comment"===g?"":g,maxLength:34}):l.createElement("span",null,g)),l.createElement("hr",null),w?l.createElement("div",{style:{minHeight:"180px"}},((e,t)=>jsx(E,{className:j({name:"kk8v5",styles:"width:100%;padding:10px;&:focus{outline:none;}"}),minRows:10,placeholder:"",value:"You have no commnet for this book"===e?"":e,onChange:t}))(b,y),l.createElement(A,null,l.createElement("span",{onClick:Y},"Finish"),l.createElement("span",{onClick:J},"Cancle"))):C?l.createElement(l.Fragment,null,l.createElement(U,null,l.createElement("p",null,t.description)),l.createElement(A,null,l.createElement("span",{onClick:P},"Comment"))):l.createElement(l.Fragment,null,l.createElement("p",{className:"longComment"},b),l.createElement(A,null,l.createElement("span",{onClick:P},"Info"),l.createElement("span",{onClick:_},"Comment"),l.createElement("span",{onClick:G},"Delete")))))))}},9598:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)}},3201:(e,t,n)=>{n.d(t,{Z:()=>r});const a={100:"국내도서",101:"국내도서>소설",102:"국내도서>시/에세이",103:"국내도서>예술/대중문화",104:"국내도서>사회과학",105:"국내도서>역사와 문화",107:"국내도서>잡지",108:"국내도서>만화",109:"국내도서>유아",110:"국내도서>아동",111:"국내도서>가정과 생활",112:"국내도서>청소년",113:"국내도서>초등학습서",114:"국내도서>고등학습서",115:"국내도서>국어/외국어/사전",116:"국내도서>자연과 과학",117:"국내도서>경제경영",118:"국내도서>자기계발",119:"국내도서>인문",120:"국내도서>종교/역학",122:"국내도서>컴퓨터/인터넷",123:"국내도서>자격서/수험서",124:"국내도서>취미/레저",125:"국내도서>전공도서/대학교재",126:"국내도서>건강/뷰티",128:"국내도서>여행",129:"국내도서>중등학습서",200:"외국도서",201:"외국도서>어린이",203:"외국도서>ELT/사전",205:"외국도서>문학",206:"외국도서>경영/인문",207:"외국도서>예술/디자인",208:"외국도서>실용",209:"외국도서>해외잡지",210:"외국도서>대학교재/전문서적",211:"외국도서>컴퓨터",214:"외국도서>일본도서",215:"외국도서>프랑스도서",216:"외국도서>중국도서",217:"외국도서>해외주문원서",300:"음반>",301:"음반>가요",302:"음반>Pop",303:"음반>Rock",304:"음반>일본음악",305:"음반>World Music",306:"음반>Jazz",307:"음반>클래식",308:"음반>국악",309:"음반>뉴에이지/명상",310:"음반>O.S.T",311:"음반>종교음악",312:"음반>유아/아동/태교",313:"음반>수입음반",314:"음반>액세서리/관련상품",315:"음반>뮤직 DVD",319:"음반>해외구매",320:"음반>LP",400:"DVD>",409:"DVD>애니메이션",411:"DVD>다큐멘터리",412:"DVD>TV시리즈",417:"DVD>건강/취미/스포츠",425:"DVD>영화",426:"DVD>해외구매",427:"DVD>기타",428:"DVD>블루레이",429:"DVD>유아동/교육DVD",430:"DVD>EBS 교육용"},r=function(e){let t=a[e]?.match(/(.+)>(.+)/);return t?.length>2?t[2]:""}},5993:(e,t,n)=>{n.d(t,{O:()=>l,w:()=>s});var a=n(301),r=n(1560),i=n(8703);const o=(0,a.ZF)({apiKey:"AIzaSyDl3PNP0Paj7ngS7cDdl72bOc9F7mznc4k",authDomain:"bookcomment-857df.firebaseapp.com",databaseURL:"bookcomment-857df-default-rtdb",projectId:"bookcomment-857df",storageBucket:"bookcomment-857df.appspot.com",messagingSenderId:"975887228518",appId:"1:975887228518:web:ad15d471090fc6eefcd7a7"}),l=(0,r.v0)(o),s=(0,i.ad)()}}]);