"use strict";(self.webpackChunkbookhelper_ts_sass=self.webpackChunkbookhelper_ts_sass||[]).push([[894],{3920:(e,t,n)=>{n.d(t,{z:()=>l});var a=n(2804),r=n(7784),o=n(7294),i=n(3639);function l(e){const[t,n]=(0,o.useState)(!1);return r.O.onAuthStateChanged((e=>{n(!!e)})),(0,a.cn)({key:`firebase/${e}/${(0,i.Z)()}`,default:t})}},9404:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294);const r=(0,n(8884).Z)("div",{target:"eon6qav0"})("position:fixed;top:0;left:0;margin:0;padding:0;background-color:#e5e9ea;color:#00000096;font-family:'Roboto',sans-serif;display:flex;justify-content:center;align-items:center;width:100%;height:100%;z-index:100;transition-duration:1.5s;",(e=>"doing"===e["data-mode"]?{opacity:"1"}:"done"===e["data-mode"]?{opacity:"0",visibility:"hidden"}:null)," .container{position:relative;& span{font-weight:800;font-size:40px;}.loadContainer{position:relative;left:96px;top:10;height:80px;& div{display:inline-block;position:absolute;top:10px;left:8px;width:16px;background:currentColor;animation:lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;}& div:nth-of-type(1){left:8px;animation-delay:0s;}& div:nth-of-type(2){left:32px;animation-delay:0.12s;}& div:nth-of-type(3){left:56px;animation-delay:0.24s;}@keyframes lds-facebook{0%{top:8px;height:64px;}50%,100%{top:24px;height:32px;}}}}"),o=function({loading:e}){return a.createElement(r,{"data-mode":e?"doing":"done"},a.createElement("div",{className:"container"},a.createElement("span",null,"Book Comment"),a.createElement("div",{className:"loadContainer"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))))}},3645:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);const r=e=>{const[t,n]=(0,a.useState)(e),r=(0,a.useCallback)((e=>{n(e.target.value)}),[]);return[t,n,r]}},2894:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(3645),r=n(9669),o=n.n(r),i=n(7294),l=n(6974),s=n(8884);const c=(0,s.Z)("div",{target:"e17yqbr23"})({name:"1o3373h",styles:"position:relative;width:100%;height:100vh;display:flex;justify-content:center;align-items:center"}),d=(0,s.Z)("div",{target:"e17yqbr22"})({name:"1umaxau",styles:"position:relative;width:800px;display:flex;flex-direction:row;font-family:'Noto Sans KR',sans-serif;.topBtn{position:absolute;top:-5;right:0;z-index:5;& img{width:15px;}& img:hover{cursor:pointer;}}"}),m=(0,s.Z)("div",{target:"e17yqbr21"})({name:"1u5ryat",styles:"position:relative;height:280px;float:left;box-shadow:0px 1px 1px rgba(0, 0, 0, 0.3),0px 2px 2px rgba(0, 0, 0, 0.22);& a{position:absolute;left:0;bottom:-20;text-decoration:none;font-size:12px;color:rgb(105, 105, 105);width:60px;}& a:hover{color:black;}"}),u=(0,s.Z)("div",{target:"e17yqbr20"})({name:"1r649v9",styles:"width:100%;margin-left:70px;& hr{margin:20px 0;border:2px solid rgb(230, 230, 230);}.longComment{color:rgb(105, 105, 105);}"});var g=n(7784),f=n(1591),p=n(2804),h=n(3920),b=n(9404),v=n(6333),x=n(9183);const y=(0,s.Z)("div",{target:"e1n39pvx2"})({name:"1xn4xk6",styles:".title{margin:0;margin-bottom:20px;font-size:22px;color:black;}.infoDiv{color:rgb(105, 105, 105);margin:7px 0;.rtcomment{font-size:12px;margin-left:10px;}}.tagName{margin-right:65px;}& hr{margin:20px 0;border:2px solid rgb(230, 230, 230);}.longComment{color:rgb(105, 105, 105);}"}),E=(0,s.Z)("textarea",{target:"e1n39pvx1"})({name:"lxk7ur",styles:"resize:none;vertical-align:middle;width:50px;height:25px;padding-left:10px;&:focus{outline:none;}"}),k=(0,s.Z)("textarea",{target:"e1n39pvx0"})({name:"gsp2hd",styles:"resize:none;vertical-align:middle;width:420px;height:55px;padding:10px;&:focus{outline:none;}"}),C=function({book:e,infoMode:t,editMode:n,rating:a,onChangeRating:r,onChangeShortComment:o,shortComment:l}){return i.createElement(y,null,i.createElement("p",{className:"title"},e.title," "),e.author?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"작가 "),i.createElement("span",null,e.author)):null,e.categoryId?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"장르 "),i.createElement("span",null,(0,x.Z)(e.categoryId))):null,e.pubDate?i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"출판일"),i.createElement("span",null,(0,v.Z)(e.pubDate))):null,t?null:i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"평점 "),n?i.createElement(i.Fragment,null,i.createElement(E,{onChange:r,value:a}),i.createElement("span",{className:"rtcomment"},"5점이 만점입니다.")):i.createElement("span",null,a)),t?null:i.createElement("div",{className:"infoDiv"},i.createElement("span",{className:"tagName"},"한줄평"),n?i.createElement(k,{onChange:o,value:"There's no comment"===l?"":l,maxLength:34}):i.createElement("span",null,l)))};var w=n(7462),D=n(3366);const S=i.useLayoutEffect;var z=function(e,t){"function"!=typeof e?e.current=t:e(t)};var N={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Z=function(e){Object.keys(N).forEach((function(t){e.style.setProperty(t,N[t],"important")}))},R=null,M=function(){},F=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],L=!!document.documentElement.currentStyle,O=function(e,t){var n,a=e.cacheMeasurements,r=e.maxRows,o=e.minRows,l=e.onChange,s=void 0===l?M:l,c=e.onHeightChange,d=void 0===c?M:c,m=(0,D.Z)(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),u=void 0!==m.value,g=(0,i.useRef)(null),f=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)((function(a){e.current=a,n.current&&z(n.current,null),n.current=t,t&&z(t,a)}),[t])}(g,t),p=(0,i.useRef)(0),h=(0,i.useRef)(),b=function(){var e=g.current,t=a&&h.current?h.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,a=(n=t,F.reduce((function(e,t){return e[t]=n[t],e}),{})),r=a.boxSizing;return""===r?null:(L&&"border-box"===r&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px"),{sizingStyle:a,paddingSize:parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),borderSize:parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth)})}(e);if(t){h.current=t;var n=function(e,t,n,a){void 0===n&&(n=1),void 0===a&&(a=1/0),R||((R=document.createElement("textarea")).setAttribute("tabindex","-1"),R.setAttribute("aria-hidden","true"),Z(R)),null===R.parentNode&&document.body.appendChild(R);var r=e.paddingSize,o=e.borderSize,i=e.sizingStyle,l=i.boxSizing;Object.keys(i).forEach((function(e){var t=e;R.style[t]=i[t]})),Z(R),R.value=t;var s=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(R,e);R.value="x";var c=R.scrollHeight-r,d=c*n;"border-box"===l&&(d=d+r+o),s=Math.max(d,s);var m=c*a;return"border-box"===l&&(m=m+r+o),[s=Math.min(m,s),c]}(t,e.value||e.placeholder||"x",o,r),i=n[0],l=n[1];p.current!==i&&(p.current=i,e.style.setProperty("height",i+"px","important"),d(i,{rowHeight:l}))}};return(0,i.useLayoutEffect)(b),n=function(e){var t=(0,i.useRef)(e);return S((function(){t.current=e})),t}(b),(0,i.useLayoutEffect)((function(){var e=function(e){n.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,i.createElement)("textarea",(0,w.Z)({},m,{onChange:function(e){u||b(),s(e)},ref:f}))};const V=(0,i.forwardRef)(O);var I=n(6898),j=n(4199),T=n(444);function U(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function A(e,t,n){var a=[],r=(0,T.f)(e,a,n);return a.length<2?n:r+t(a)}var B=function e(t){for(var n="",a=0;a<t.length;a++){var r=t[a];if(null!=r){var o=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))o=e(r);else for(var i in o="",r)r[i]&&i&&(o&&(o+=" "),o+=i);break;default:o=r}o&&(n&&(n+=" "),n+=o)}}return n};var W=function(e){var t=(0,I.Z)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,j.O)(n,t.registered,void 0);return(0,T.M)(t,r,!1),t.key+"-"+r.name};return{css:n,cx:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return A(t.registered,n,B(a))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,j.O)(n,t.registered);U(t,r)},keyframes:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=(0,j.O)(n,t.registered),o="animation-"+r.name;return U(t,{name:r.name,styles:"@keyframes "+o+"{"+r.styles+"}"}),o},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:T.f.bind(null,t.registered),merge:A.bind(null,t.registered,n)}}({key:"css"}),H=(W.flush,W.hydrate,W.cx,W.merge,W.getRegisteredStyles,W.injectGlobal,W.keyframes,W.css);W.sheet,W.cache;const P=(0,s.Z)("div",{target:"e18l7pvw1"})({name:"rro8en",styles:"color:rgb(105, 105, 105);text-align:justify"}),q=(0,s.Z)("div",{target:"e18l7pvw0"})({name:"2gbdx1",styles:"position:absolute;right:0;bottom:-10;color:rgb(105, 105, 105);font-family:'Open Sans',sans-serif;font-size:14px;& span{margin-left:20px;}& span:hover{cursor:pointer;}"}),J=function({shortComment:e,longComment:t,onCangeLongComment:n,book:a,rating:r,bookIsbn:o,editMode:l,setEditMode:s,infoMode:c,setInfoMode:d}){const m=(0,i.useCallback)((()=>{d((e=>!e))}),[d]),u=(0,i.useCallback)((()=>{s((e=>!e))}),[s]),p=(0,i.useCallback)((()=>{s(!1)}),[s]),h=(0,i.useCallback)((async n=>{n.preventDefault();try{await(0,f.pl)((0,f.JU)(g.w,"UserEval",g.O.currentUser.uid),{[o]:Object.assign({},a,{rating:r,shortComment:e,longComment:t,editDate:new Date})},{merge:!0})}catch(e){console.log(e)}s(!1),d(!1)}),[a,o,t,r,s,d,e]),b=(0,i.useCallback)((async()=>{if(window.confirm("정말로 이 후기를 지우시겠습니까?")){const e=(0,f.JU)(g.w,"UserEval",g.O.currentUser.uid);await(0,f.r7)(e,{[o]:(0,f.AK)()}).then((()=>window.alert("삭제 완료"))).catch((e=>console.log(e)))}}),[o]);return l?i.createElement("div",{style:{minHeight:"180px"}},((e,t)=>i.createElement(V,{className:H({name:"kk8v5",styles:"width:100%;padding:10px;&:focus{outline:none;}"}),minRows:10,placeholder:"",value:"You have no commnet for this book"===e?"":e,onChange:t}))(t,n),i.createElement(q,null,i.createElement("span",{onClick:h},"Finish"),i.createElement("span",{onClick:p},"Cancle"))):c?i.createElement(i.Fragment,null,i.createElement(P,null,i.createElement("p",null,a.description)),i.createElement(q,null,i.createElement("span",{onClick:m},"Comment"))):i.createElement(i.Fragment,null,i.createElement("p",{className:"longComment"},t),i.createElement(q,null,i.createElement("span",{onClick:m},"Info"),i.createElement("span",{onClick:u},"Edit"),i.createElement("span",{onClick:b},"Delete")))},_=function(){const{isbn:e}=(0,l.UO)(),[t,n]=(0,i.useState)({}),[r,s]=(0,i.useState)(0),[v,x]=(0,i.useState)(!1),[y,E,k]=(0,a.Z)(0),[w,D,S]=(0,a.Z)("There's no comment"),[z,N,Z]=(0,a.Z)("You have no commnet for this book"),[R,M]=(0,i.useState)(!1),[F,L]=(0,i.useState)(!1),O=(0,p.sJ)((0,h.z)("detailpage")),V=(0,l.s0)(),I=(0,i.useCallback)((()=>{V(-1)}),[V]),j=(0,i.useCallback)((async()=>{if(O){const e=(await(0,f.QT)((0,f.JU)(g.w,"UserEval",g.O.currentUser.uid))).data();e&&e[r]?e&&(L(!1),E(e[r].rating),D(e[r].shortComment),N(e[r].longComment)):L(!0)}else L(!0),E(0),D("There's no comment"),N("You have no commnet for this book");x(!1)}),[r,O,N,E,D]);return(0,i.useEffect)((()=>{x(!0),o().get(`https://www.interbookserver.kro.kr:3085/isbnsearch/${e}`).then((e=>{n(e.data.items[0]),s(e.data.items[0].isbn)}))}),[e,n,x]),(0,i.useEffect)((()=>{Object.keys(t).length&&j()}),[t,j,O]),i.createElement(i.Fragment,null,i.createElement(b.Z,{loading:v}),v?null:i.createElement(c,null,i.createElement(d,null,i.createElement("p",{className:"topBtn",onClick:I},i.createElement("img",{src:"https://user-images.githubusercontent.com/79993356/154732530-9f85dfa4-e9f8-484a-acdf-6371eb981bc5.png",alt:"null"})),i.createElement(m,null,i.createElement("img",{src:t.coverLargeUrl,alt:t.title}),i.createElement("a",{href:t.link,target:"_blank",rel:"noreferrer"},"More Info?")),i.createElement(u,null,i.createElement(C,{book:t,infoMode:F,editMode:R,rating:y,onChangeRating:k,onChangeShortComment:S,shortComment:w}),i.createElement("hr",null),i.createElement(J,{shortComment:w,longComment:z,onCangeLongComment:Z,book:t,rating:y,bookIsbn:r,editMode:R,setEditMode:M,infoMode:F,setInfoMode:L})))))}},6333:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e){return e.slice(0,4)+"."+e.slice(4,6)+"."+e.slice(6,8)}},9183:(e,t,n)=>{n.d(t,{Z:()=>r});const a={100:"국내도서",101:"국내도서>소설",102:"국내도서>시/에세이",103:"국내도서>예술/대중문화",104:"국내도서>사회과학",105:"국내도서>역사와 문화",107:"국내도서>잡지",108:"국내도서>만화",109:"국내도서>유아",110:"국내도서>아동",111:"국내도서>가정과 생활",112:"국내도서>청소년",113:"국내도서>초등학습서",114:"국내도서>고등학습서",115:"국내도서>국어/외국어/사전",116:"국내도서>자연과 과학",117:"국내도서>경제경영",118:"국내도서>자기계발",119:"국내도서>인문",120:"국내도서>종교/역학",122:"국내도서>컴퓨터/인터넷",123:"국내도서>자격서/수험서",124:"국내도서>취미/레저",125:"국내도서>전공도서/대학교재",126:"국내도서>건강/뷰티",128:"국내도서>여행",129:"국내도서>중등학습서",200:"외국도서",201:"외국도서>어린이",203:"외국도서>ELT/사전",205:"외국도서>문학",206:"외국도서>경영/인문",207:"외국도서>예술/디자인",208:"외국도서>실용",209:"외국도서>해외잡지",210:"외국도서>대학교재/전문서적",211:"외국도서>컴퓨터",214:"외국도서>일본도서",215:"외국도서>프랑스도서",216:"외국도서>중국도서",217:"외국도서>해외주문원서",300:"음반>",301:"음반>가요",302:"음반>Pop",303:"음반>Rock",304:"음반>일본음악",305:"음반>World Music",306:"음반>Jazz",307:"음반>클래식",308:"음반>국악",309:"음반>뉴에이지/명상",310:"음반>O.S.T",311:"음반>종교음악",312:"음반>유아/아동/태교",313:"음반>수입음반",314:"음반>액세서리/관련상품",315:"음반>뮤직 DVD",319:"음반>해외구매",320:"음반>LP",400:"DVD>",409:"DVD>애니메이션",411:"DVD>다큐멘터리",412:"DVD>TV시리즈",417:"DVD>건강/취미/스포츠",425:"DVD>영화",426:"DVD>해외구매",427:"DVD>기타",428:"DVD>블루레이",429:"DVD>유아동/교육DVD",430:"DVD>EBS 교육용"},r=function(e){let t=a[e]?a[e].match(/(.+)>(.+)/):[];return t.length>2?t[2]:""}},7784:(e,t,n)=>{n.d(t,{O:()=>l,w:()=>s});var a=n(5503),r=n(1236),o=n(1591);const i=(0,a.ZF)({apiKey:"AIzaSyDl3PNP0Paj7ngS7cDdl72bOc9F7mznc4k",authDomain:"bookcomment-857df.firebaseapp.com",databaseURL:"bookcomment-857df-default-rtdb",projectId:"bookcomment-857df",storageBucket:"bookcomment-857df.appspot.com",messagingSenderId:"975887228518",appId:"1:975887228518:web:ad15d471090fc6eefcd7a7"}),l=(0,r.v0)(i),s=(0,o.ad)()}}]);